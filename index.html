<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<title>経営戦略2級マスター</title>
<style>
    :root { --primary: #2563eb; --correct: #16a34a; --wrong: #dc2626; --bg: #f3f4f6; --card: #ffffff; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: #1f2937; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; -webkit-tap-highlight-color: transparent; }
    .container { width: 100%; max-width: 600px; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; height: 100vh; justify-content: center; }
    
    /* カードデザイン */
    .card { background: var(--card); border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); padding: 24px; display: flex; flex-direction: column; height: auto; max-height: 90vh; overflow-y: auto; }
    
    /* タイトル画面 */
    .title-screen { text-align: center; }
    .title-screen h1 { font-size: 1.8rem; margin-bottom: 1rem; color: var(--primary); }
    .title-screen p { color: #6b7280; margin-bottom: 2rem; }
    
    /* 問題画面 */
    .quiz-header { display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 0.9rem; color: #6b7280; font-weight: bold; }
    .question-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 24px; line-height: 1.6; white-space: pre-wrap; }
    
    /* 選択肢ボタン */
    .options-grid { display: grid; gap: 12px; }
    .option-btn { background: #f9fafb; border: 2px solid #e5e7eb; padding: 16px; border-radius: 12px; font-size: 1rem; text-align: left; cursor: pointer; transition: all 0.2s; color: #374151; font-weight: 500; }
    .option-btn:active { background: #e5e7eb; transform: scale(0.98); }
    
    /* 正誤判定後のスタイル */
    .option-btn.correct { background: #dcfce7; border-color: var(--correct); color: var(--correct); }
    .option-btn.wrong { background: #fee2e2; border-color: var(--wrong); color: var(--wrong); opacity: 0.7; }
    .option-btn.disabled { pointer-events: none; }

    /* 解説エリア */
    .explanation-area { margin-top: 24px; padding: 16px; background: #eff6ff; border-radius: 12px; border-left: 4px solid var(--primary); display: none; animation: fadeIn 0.3s; }
    .explanation-title { font-weight: bold; color: var(--primary); margin-bottom: 8px; display: block; }
    .explanation-text { font-size: 0.95rem; line-height: 1.6; color: #374151; }

    /* 操作ボタン */
    .btn-primary { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 12px; font-size: 1.1rem; font-weight: bold; width: 100%; margin-top: 20px; cursor: pointer; display: none; }
    .btn-start { display: block; }
    
    /* 結果画面 */
    .result-screen { text-align: center; display: none; }
    .score-circle { width: 120px; height: 120px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: bold; margin: 0 auto 24px; box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3); }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<div class="container" id="app">
    <div id="start-screen" class="card title-screen">
        <h1>経営戦略2級<br>完全攻略 v2.0</h1>
        <p>全25問 / ランダム出題<br>通勤時間の隙間をハックせよ</p>
        <button class="btn-primary btn-start" onclick="startQuiz()">学習を始める</button>
    </div>

    <div id="quiz-screen" class="card" style="display: none;">
        <div class="quiz-header">
            <span id="progress-text">Q1 / 25</span>
            <span id="score-text">Score: 0</span>
        </div>
        <div id="question-text" class="question-text"></div>
        <div id="options-container" class="options-grid"></div>
        
        <div id="explanation" class="explanation-area">
            <span id="result-status" class="explanation-title"></span>
            <div id="explanation-content" class="explanation-text"></div>
        </div>

        <button id="next-btn" class="btn-primary" onclick="nextQuestion()">次の問題へ</button>
    </div>

    <div id="result-screen" class="card result-screen">
        <h2>お疲れ様でした！</h2>
        <p>今回のスコア</p>
        <div class="score-circle">
            <span id="final-score"></span>
        </div>
        <p id="feedback-message" style="margin-bottom: 24px; font-weight: bold; color: #4b5563;"></p>
        <button class="btn-primary btn-start" onclick="startQuiz()">もう一度挑戦する</button>
    </div>
</div>

<script>
    // 全25問のデータセット
    const allQuestions = [
        // 1. 競争戦略・フレームワーク
        { q: "【アンゾフの成長ベクトル】\n既存の製品技術やノウハウを活かしつつ、これまで未開拓だった新しい市場（顧客層・地域など）に進出する戦略はどれか？\n\n1. 市場浸透戦略\n2. 新製品開発戦略\n3. 市場開拓戦略\n4. 多角化戦略", a: 3, exp: "正解：3（市場開拓戦略）\n・市場開拓：既存製品 × 新規市場\n・市場浸透：既存製品 × 既存市場\n・新製品開発：新規製品 × 既存市場\n・多角化：新規製品 × 新規市場" },
        { q: "【ポーターの基本戦略】\n業界全体をターゲットとし、製品の品質・デザイン・ブランドなどで競合他社とは異なる特異性を打ち出すことで競争優位を築く戦略はどれか？\n\n1. コスト・リーダーシップ戦略\n2. 差別化戦略\n3. 集中戦略（コスト）\n4. 集中戦略（差別化）", a: 2, exp: "正解：2（差別化戦略）\n価格以外の価値（プレミアム）を提供し、価格競争を回避する戦略です。" },
        { q: "【コトラーの競争地位別戦略】\n業界シェア2番手以下の企業が、リーダー企業に対して差別化や低価格などで積極的に勝負を挑み、シェア逆転を狙う戦略はどれか？\n\n1. マーケット・リーダー\n2. マーケット・チャレンジャー\n3. マーケット・フォロワー\n4. マーケット・ニッチャー", a: 2, exp: "正解：2（チャレンジャー）\nリーダーに挑戦するのがチャレンジャー。フォロワーは模倣、ニッチャーは隙間産業です。" },
        { q: "【PPM】\n「市場成長率」は低いが、「相対的マーケットシェア」は高く、安定したキャッシュフローを生み出す事業はどれか？\n\n1. 花形（Star）\n2. 金のなる木（Cash Cows）\n3. 問題児（Problem Child）\n4. 負け犬（Dogs）", a: 2, exp: "正解：2（金のなる木）\nここで稼いだ資金を、成長率の高い「花形」や「問題児」へ再投資するのが定石です。" },
        { q: "【VRIO分析】\n経営資源の競争優位性を評価する4つの視点のうち、「その資源を他社が真似しようとした場合に、コストや時間がどれくらいかかるか」を問うものはどれか？\n\n1. Value（経済的価値）\n2. Rarity（希少性）\n3. Imitability（模倣困難性）\n4. Organization（組織）", a: 3, exp: "正解：3（模倣困難性）\nImitabilityが高い（真似しにくい）と、競争優位が長期間持続します。" },

        // 2. 組織構造
        { q: "【組織構造の種類】\n購買・製造・営業・経理といった「職能」ごとに部門を編成する組織形態はどれか？\n\n1. 事業部制組織\n2. 機能別組織\n3. マトリクス組織\n4. プロジェクトチーム", a: 2, exp: "正解：2（機能別組織）\n専門性は高まりますが、部門間の壁（セクショナリズム）ができやすいのが特徴です。" },
        { q: "【組織構造の種類】\n製品別や地域別などの単位で分割し、各部門が独自の利益責任と包括的な権限を持つ組織形態はどれか？\n\n1. 機能別組織\n2. マトリクス組織\n3. 事業部制組織\n4. カンパニー制組織", a: 3, exp: "正解：3（事業部制組織）\n各事業部が「小さな会社」のように機能し、意思決定が迅速になります。" },
        { q: "【組織構造の種類】\n「機能別」と「事業別」の2つの指揮命令系統を組み合わせた組織形態はどれか？\n\n1. 事業部制組織\n2. マトリクス組織\n3. ライン・アンド・スタッフ組織\n4. ネットワーク組織", a: 2, exp: "正解：2（マトリクス組織）\n「ワンマンツーボス（一人の部下に二人の上司）」による調整コストに注意が必要です。" },
        { q: "【組織論の原則】\n1人の上司が直接管理できる部下の人数には限界があるため、組織階層を適切に設定すべきという原則はどれか？\n\n1. 命令一元化の原則\n2. 権限委譲の原則\n3. 専門化の原則\n4. スパン・オブ・コントロールの原則", a: 4, exp: "正解：4（スパン・オブ・コントロール）\n管理限界を超えると組織の効率が低下します。" },
        { q: "【組織文化】\nシャインが提唱した組織文化の3レベルのうち、最も深層にあり、変革が最も困難な部分はどれか？\n\n1. 人工物\n2. 標榜される価値観\n3. 基本的仮定\n4. 行動規範", a: 3, exp: "正解：3（基本的仮定）\n無意識の前提認識であり、ここを変えるのが組織変革の最大の難所です。" },

        // 3. イノベーション
        { q: "【イノベーションの分類】\nシュンペーターの「新結合」に含まれないものはどれか？\n\n1. 新しい生産方法の導入\n2. 新しい供給源の獲得\n3. 新しい組織の実現\n4. 既存製品の低価格化", a: 4, exp: "正解：4\n単なる価格競争はイノベーション（新結合）には含まれません。" },
        { q: "【イノベーションのジレンマ】\n優良企業が既存顧客への対応（持続的イノベーション）に注力しすぎ、新興勢力の低機能製品に市場を奪われる現象は？\n\n1. 持続的イノベーション\n2. 破壊的イノベーション\n3. オープン・イノベーション\n4. プロセス・イノベーション", a: 2, exp: "正解：2（破壊的イノベーション）\nクリステンセンの提唱した有名な理論です。" },
        { q: "【技術経営】\n技術進化の過程で、特定の仕様が「業界標準」として定着することを何というか？\n\n1. デファクト・スタンダード\n2. ドミナント・デザイン\n3. コア・コンピタンス\n4. モジュール化", a: 2, exp: "正解：2（ドミナント・デザイン）\nこれが確立すると、競争の焦点は製品性能からコスト（工程革新）へ移ります。" },
        { q: "【死の谷】\n研究開発から「事業化」までの間に横たわる、資金調達等の難関を指す言葉は？\n\n1. 魔の川\n2. 死の谷（Valley of Death）\n3. ダーウィンの海\n4. キャズム", a: 2, exp: "正解：2（死の谷）\n基礎研究→開発は「魔の川」、事業化→市場定着は「ダーウィンの海」です。" },
        { q: "【オープン・イノベーション】\n自社だけでなく外部の技術やアイデアを積極的に取り入れる考え方は？\n\n1. クローズド・イノベーション\n2. オープン・イノベーション\n3. リバース・イノベーション\n4. ユーザー・イノベーション", a: 2, exp: "正解：2\n自前主義（NIH症候群）からの脱却を目指す概念です。" },

        // 4. マーケティング
        { q: "【STP分析】\n市場細分化、ターゲット選定、立ち位置の明確化のプロセスを何というか？\n\n1. 3C分析\n2. SWOT分析\n3. PEST分析\n4. STP分析", a: 4, exp: "正解：4（STP分析）\nSegmentation, Targeting, Positioningの頭文字です。" },
        { q: "【4Pと4C】\n売り手の「Place（流通）」に対応する、買い手の視点（4C）はどれか？\n\n1. Customer Value\n2. Cost\n3. Convenience\n4. Communication", a: 3, exp: "正解：3（Convenience：利便性）\n顧客にとっていかに「入手しやすいか」という視点です。" },
        { q: "【価格戦略】\n新製品投入時に高価格を設定し、開発コストを早期回収する戦略は？\n\n1. 市場浸透価格戦略\n2. 上澄み吸収価格戦略（スキミング）\n3. ダイナミック・プライシング\n4. サブスクリプション", a: 2, exp: "正解：2（スキミング）\n逆に低価格でシェアを取るのは市場浸透価格（ペネトレーション）です。" },
        { q: "【ブランド戦略】\nブランドを企業の「資産」として捉える概念は？\n\n1. ブランド・アイデンティティ\n2. ブランド・エクイティ\n3. トレードマーク\n4. プライベート・ブランド", a: 2, exp: "正解：2（ブランド・エクイティ）\nアーカーが提唱しました。" },
        { q: "【顧客生涯価値】\nある顧客が生涯にわたってもたらす利益の総額を指す指標は？\n\n1. KPI\n2. ROI\n3. LTV\n4. CRM", a: 3, exp: "正解：3（LTV）\nLife Time Value。リテンション（顧客維持）が重要になります。" },

        // 5. 企業統治・ガバナンス
        { q: "【株式会社】\n株主が取締役の選任などを決議する最高意思決定機関は？\n\n1. 取締役会\n2. 監査役会\n3. 株主総会\n4. 経営会議", a: 3, exp: "正解：3（株主総会）\n会社の所有者は株主です。" },
        { q: "【エージェンシー理論】\n経営者が株主の利益より自身の利益を優先してしまう問題は？\n\n1. エージェンシー問題\n2. モラル・ハザード\n3. フリーライダー問題\n4. アドバース・セレクション", a: 1, exp: "正解：1\n情報の非対称性が原因で起こります。" },
        { q: "【指名委員会等設置会社】\n3つの委員会の過半数を占める必要があるのは誰か？\n\n1. 代表取締役\n2. 社内取締役\n3. 社外取締役\n4. 監査役", a: 3, exp: "正解：3（社外取締役）\n監督機能の強化が目的です。" },
        { q: "【内部統制】\n業務の有効性・効率性、財務報告の信頼性等を確保するプロセスは？\n\n1. コンプライアンス\n2. リスク・マネジメント\n3. 内部統制\n4. デュー・デリジェンス", a: 3, exp: "正解：3（内部統制）\n効率性も目的の一つである点を忘れずに。" },
        { q: "【CSR】\n株主だけでなく全利害関係者の利益を重視する考え方は？\n\n1. 株主至上主義\n2. ステークホルダー資本主義\n3. 国家資本主義\n4. 新自由主義", a: 2, exp: "正解：2\n現代経営の主流となる考え方です。" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let isAnswering = false;

    // 配列をシャッフルする関数
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // 問題文から選択肢を抽出して整形するヘルパー関数
    function parseQuestion(qData) {
        // 問題文と選択肢がひとまとまりになっているテキストから分離
        const parts = qData.q.split(/\n\n1\./); 
        const questionText = parts[0];
        
        // 選択肢テキストがあればそこから配列生成、なければデフォルト（1~4）
        let options = ["選択肢1", "選択肢2", "選択肢3", "選択肢4"];
        if (parts.length > 1) {
            const optionsText = "1." + parts[1]; // "1."を戻す
            // 改行で分割して整形
            options = optionsText.split(/\n/).map(o => o.replace(/^\d+\.\s*/, '').trim()).filter(o => o);
        }
        return { text: questionText, options: options, answerIdx: qData.a - 1, exp: qData.exp };
    }

    function startQuiz() {
        // ランダムにシャッフルして開始
        currentQuestions = shuffleArray([...allQuestions]);
        currentIndex = 0;
        score = 0;
        
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'flex';
        
        loadQuestion();
    }

    function loadQuestion() {
        isAnswering = true;
        const qData = currentQuestions[currentIndex];
        const parsed = parseQuestion(qData);
        
        document.getElementById('progress-text').textContent = `Q${currentIndex + 1} / ${currentQuestions.length}`;
        document.getElementById('score-text').textContent = `Score: ${score}`;
        document.getElementById('question-text').textContent = parsed.text;
        
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = '';

        parsed.options.forEach((optText, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = optText;
            btn.onclick = () => checkAnswer(i, parsed.answerIdx, btn);
            optionsContainer.appendChild(btn);
        });

        // 解説エリアをリセット
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';
    }

    function checkAnswer(selectedIdx, correctIdx, btnElement) {
        if (!isAnswering) return;
        isAnswering = false;

        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(btn => btn.classList.add('disabled'));

        const qData = currentQuestions[currentIndex];
        const resultTitle = document.getElementById('result-status');

        if (selectedIdx === correctIdx) {
            btnElement.classList.add('correct');
            resultTitle.textContent = "正解！";
            resultTitle.style.color = "var(--correct)";
            score++;
            document.getElementById('score-text').textContent = `Score: ${score}`;
        } else {
            btnElement.classList.add('wrong');
            allBtns[correctIdx].classList.add('correct'); // 正解を表示
            resultTitle.textContent = "不正解...";
            resultTitle.style.color = "var(--wrong)";
        }

        // 解説表示
        document.getElementById('explanation-content').textContent = qData.exp;
        document.getElementById('explanation').style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';
        
        // スマホで見やすいように少しスクロール
        setTimeout(() => {
            document.getElementById('next-btn').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        const finalScore = document.getElementById('final-score');
        finalScore.textContent = `${score}/${currentQuestions.length}`;
        
        const feedback = document.getElementById('feedback-message');
        const percentage = (score / currentQuestions.length) * 100;
        
        if (percentage >= 80) {
            feedback.textContent = "素晴らしい！合格レベルです！";
        } else if (percentage >= 60) {
            feedback.textContent = "あと少し！苦手分野を見直そう。";
        } else {
            feedback.textContent = "まずは基礎を固めましょう！";
        }
    }
</script>

</body>
</html>
